# OpenCV MinGW Setup Guide

This guide outlines the steps taken to successfully compile and run an OpenCV C++ project using MinGW on Windows, addressing common issues encountered during the setup process.

## 1. Prerequisites

Before starting, ensure you have the following installed and configured:

*   **MinGW-w64 (g++ compiler):** Make sure `g++` is installed and its `bin` directory is added to your system's PATH. You can verify by running `g++ --version` in your command prompt.
*   **CMake:** Ensure CMake is installed and its `bin` directory is added to your system's PATH. You can verify by running `cmake --version` in your command prompt.

## 2. Download OpenCV Source Code

Download the source code for the desired OpenCV version. We used version 4.12.0.

*   **Direct Download Link (4.12.0):** [https://github.com/opencv/opencv/archive/4.12.0.zip](https://github.com/opencv/opencv/archive/4.12.0.zip)

**Action:** Download this zip file and extract its contents to a location on your system. For this guide, we used `E:\openccv\opencv-4.12.0`.

## 3. Build OpenCV from Source with MinGW

This is the most critical step to ensure compatibility between your MinGW compiler and the OpenCV libraries.

### 3.1. Create a Build Directory

Create a separate directory for the OpenCV build files. This keeps your source directory clean.

**Action:** Open your command prompt and run:
```cmd
mkdir E:\openccv\opencv-4.12.0\build_mingw
```

### 3.2. Configure OpenCV with CMake

Navigate into the newly created build directory and configure OpenCV using CMake.

**Action:** In your command prompt, run:
```cmd
cd E:\openccv\opencv-4.12.0\build_mingw
cmake -G "MinGW Makefiles" -D CMAKE_BUILD_TYPE=Release -D CMAKE_INSTALL_PREFIX="E:\openccv\opencv-4.12.0\build_mingw\install" E:\openccv\opencv-4.12.0
```
*   `-G "MinGW Makefiles"`: Specifies the MinGW build system.
*   `-D CMAKE_BUILD_TYPE=Release`: Builds optimized release binaries.
*   `-D CMAKE_INSTALL_PREFIX="..."`: Sets the installation path for the compiled OpenCV libraries.
*   `E:\openccv\opencv-4.12.0`: Points to the OpenCV source directory.

### 3.3. Handle "Out of Memory" / "No Space Left on Device" Errors (if encountered)

During compilation, you might encounter memory or disk space issues.

*   **"Out of Memory" (`cc1plus.exe: out of memory`):** This indicates the compiler ran out of RAM.
    *   **Solution:** Reduce the number of parallel compilation jobs.
*   **"No Space Left on Device":** This indicates your temporary directory is full.
    *   **Solution:** Change the temporary directory to a drive with more space.

**Action (if "No Space Left on Device" occurs):**
1.  Create a temporary directory on a drive with ample space (e.g., `E:\temp`).
    ```cmd
mkdir E:\temp
```
2.  Set the `TMP` and `TEMP` environment variables for the current session:
    ```cmd
set TMP=E:\temp
set TEMP=E:\temp
```

### 3.4. Compile OpenCV

Compile the OpenCV source code. This step can take a significant amount of time.

**Action:** In your command prompt (still in `E:\openccv\opencv-4.12.0\build_mingw`), run:
```cmd
mingw32-make -j4
```
*   `-j4`: Uses 4 parallel jobs for compilation. Adjust `4` to the number of logical processors your CPU has (e.g., `mingw32-make -j1` if memory is an issue).

### 3.5. Install OpenCV

After successful compilation, install the libraries to the specified `CMAKE_INSTALL_PREFIX`.

**Action:** In your command prompt (still in `E:\openccv\opencv-4.12.0\build_mingw`), run:
```cmd
mingw32-make install
```

## 4. Update System PATH Environment Variable

This is crucial for your system to find the OpenCV dynamic link libraries (DLLs) when running applications.

**Action:** Add the OpenCV `bin` directory to your system's permanent PATH environment variable:
1.  Search for "Environment Variables" in the Windows search bar and select "Edit the system environment variables".
2.  Click the "**Environment Variables...**" button.
3.  Under "System variables", find the variable named "**Path**" and select it.
4.  Click "**Edit...**".
5.  Click "**New**" and add the path: `E:\openccv\opencv-4.12.0\build_mingw\install\x64\mingw\bin`
6.  Click "OK" on all windows to save the changes.
7.  **IMPORTANT:** Open a **NEW** command prompt window for the changes to take effect.

## 5. Configure and Build Your Project

Now, return to your C++ project and configure it to use the newly installed OpenCV.

### 5.1. Clean Project Build Directory

Remove any previous CMake configuration files from your project's build directory.

**Action:** In your **NEW** command prompt, navigate to your project's build directory and clean it:
```cmd
cd C:\c++_projects\Recordify\hani_screen_shot\build
del CMakeCache.txt
rmdir /s /q CMakeFiles
```


### 5.2. Configure Project with CMake

Explicitly tell CMake where to find your MinGW-compatible OpenCV installation.

**Action:** In your project's build directory (`C:\c++_projects\Recordify\hani_screen_shot\build`), run:
```cmd
cmake .. -G "MinGW Makefiles" -D OpenCV_DIR="E:\openccv\opencv-4.12.0\build_mingw\install"
```
*   `-D OpenCV_DIR="..."`: Points CMake to the root of your OpenCV installation.

### 5.3. Build Your Project

Compile your project using `mingw32-make`.

**Action:** In your project's build directory (`C:\c++_projects\Recordify\hani_screen_shot\build`), run:
```cmd
mingw32-make
```

## 6. Run Your Program

After a successful build, you can run your executable.

**Action:** In your project's build directory (`C:\c++_projects\Recordify\hani_screen_shot\build`), run:
```cmd
.\generator.exe
```

This should now execute your OpenCV C++ program successfully.
